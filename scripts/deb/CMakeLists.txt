#
# SPDX-License-Identifier: MIT
#
# Copyright (C) 2015-2020 Micron Technology, Inc.  All rights reserved.

message( STATUS "Configuring ${PROJECT_NAME} deb..." )

set( CPACK_GENERATOR "DEB" )

set( CPACK_DEBIAN_PACKAGE_LICENSE      "${CPACK_PACKAGE_LICENSE}" )
set( CPACK_DEBIAN_PACKAGE_RELEASE      "${BUILD_PKG_REL}" )
set( CPACK_DEBIAN_PACKAGE_SECTION      "kernel" )
set( CPACK_DEBIAN_PACKAGE_MAINTAINER   "Micron Technology, Inc." )
set( CPACK_DEBIAN_PACKAGE_DESCRIPTION  "${CPACK_PACKAGE_DESCRIPTION}" )

set( CPACK_DEB_COMPONENT_INSTALL  "ON" )


# Runtime
#
set( CPACK_DEBIAN_RUNTIME_PACKAGE_NAME     "${CPACK_PACKAGE_NAME}" )
set( CPACK_DEBIAN_RUNTIME_FILE_NAME        "${CPACK_PACKAGE_NAME}-${CPACK_PACKAGE_FILE_NAME}.deb" )
set( CPACK_DEBIAN_RUNTIME_PACKAGE_RELEASE  "${CPACK_DEBIAN_PACKAGE_RELEASE}" )

set( CPACK_DEBIAN_RUNTIME_PACKAGE_SUMMARY
    "${CPACK_PACKAGE_DESCRIPTION_SUMMARY} runtime")

set( CPACK_DEBIAN_RUNTIME_PACKAGE_DESCRIPTION
    "${CPACK_DEBIAN_RUNTIME_PACKAGE_SUMMARY} ${BUILD_PKG_TAG}-${BUILD_STYPE}${BUILD_NUMBER}" )

set( CPACK_DEBIAN_RUNTIME_PACKAGE_CONTROL_EXTRA
    "${MPOOL_SCRIPTS_DIR}/deb/preinst;${MPOOL_SCRIPTS_DIR}/deb/postinst;${MPOOL_SCRIPTS_DIR}/deb/prerm;${MPOOL_SCRIPTS_DIR}/deb/postrm" )

# Devel/SDK - currently contains static lib and headers.
#
set( CPACK_DEBIAN_DEVEL_FILE_NAME        "${CPACK_PACKAGE_NAME}-devel-${CPACK_PACKAGE_FILE_NAME}.deb" )
set( CPACK_DEBIAN_DEVAL_PACKAGE_RELEASE  "${CPACK_DEBIAN_PACKAGE_RELEASE}" )

set( CPACK_DEBIAN_DEVEL_PACKAGE_SUMMARY
    "${CPACK_PACKAGE_DESCRIPTION_SUMMARY} SDK")

set( CPACK_DEBIAN_DEVEL_PACKAGE_DESCRIPTION
    "${CPACK_DEBIAN_DEVEL_PACKAGE_SUMMARY} ${BUILD_PKG_TAG}-${BUILD_STYPE}${BUILD_NUMBER}" )


# Tests - we won't want to ship our test applications in production.
#
set( CPACK_DEBIAN_TEST_FILE_NAME        "${CPACK_PACKAGE_NAME}-test-${CPACK_PACKAGE_FILE_NAME}.deb" )
set( CPACK_DEBIAN_TEST_PACKAGE_RELEASE  "${CPACK_DEBIAN_PACKAGE_RELEASE}" )

set( CPACK_DEBIAN_TEST_PACKAGE_SUMMARY
    "${CPACK_PACKAGE_DESCRIPTION_SUMMARY} test tools")

set( CPACK_DEBIAN_TEST_PACKAGE_DESCRIPTION
    "${CPACK_DEBIAN_TEST_PACKAGE_SUMMARY} ${BUILD_PKG_TAG}-${BUILD_STYPE}${BUILD_NUMBER}" )

set( CPACK_COMPONENT_TEST_DEPENDS       "runtime" )
